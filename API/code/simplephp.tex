\begin{verbatim}
#!/usr/bin/php -q
<?php
// Get the STDIN input
$input = get_passed_data(); 

// Do whatever hook action is desired
list($result_status, $result_msg) = do_something($input);

// Print the result to STDOUT stream
echo ``$result_status $result_msg'';

/**
 * Supporting Functions Below Here
 */

function do_something($input = array()) {
    //...do stuff here;
    $status = ``1''; //or zero for fail
    $msg = ``Success or fail message here.'';
    return array($status, $msg);
}

/**
 * Read the STDIN stream
 * Data passed to this script will be a JSON serialized structure
 */
function get_passed_data() {
    $raw_data;
    $stdin_fh = fopen('php://stdin', 'r');
    if ( is_resource($stdin_fh) ) {
        stream_set_blocking($stdin_fh, 0);
        while ( ($line = fgets( $stdin_fh, 1024 )) !== false ) {
            $raw_data .= trim($line);
        }
        fclose($stdin_fh);
    }
    if ($raw_data) {
        $input_data = json_decode($raw_data, true);
    } else {
        $input_data = array('context'=>array(),'data'=>array(), 'hook'=>array());
    }
    return $input_data;
}
?>
\end{verbatim}
